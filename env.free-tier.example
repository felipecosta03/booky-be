# ==========================================
# BOOKY BACKEND - AWS FREE TIER ENVIRONMENT
# ==========================================
# Configuraci√≥n optimizada para AWS Free Tier
# Copy this file to .env.free-tier and fill in your values

# ==========================================
# AWS CONFIGURATION
# ==========================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here

# ==========================================
# DATABASE CONFIGURATION (RDS)
# ==========================================
# These values will be auto-generated by the deployment script
DATABASE_URL=jdbc:postgresql://your-rds-endpoint:5432/booky
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=your_auto_generated_password
DATABASE_NAME=booky

# Hibernate DDL mode optimized for Free Tier
DDL_AUTO=update

# ==========================================
# JVM CONFIGURATION (t2.micro optimized)
# ==========================================
# JVM settings for 1GB RAM instance
JAVA_OPTS=-Xms256m -Xmx512m -XX:MaxMetaspaceSize=128m -XX:+UseG1GC -XX:MaxGCPauseMillis=100 -XX:+UseStringDeduplication

# ==========================================
# SPRING CONFIGURATION
# ==========================================
SPRING_PROFILES_ACTIVE=production
SERVER_PORT=8080

# Tomcat optimized for Free Tier
SERVER_TOMCAT_MAX_THREADS=50
SERVER_TOMCAT_MIN_SPARE_THREADS=10

# ==========================================
# DATABASE POOL CONFIGURATION
# ==========================================
# HikariCP settings optimized for t2.micro + RDS
HIKARI_MAXIMUM_POOL_SIZE=10
HIKARI_MINIMUM_IDLE=5
HIKARI_CONNECTION_TIMEOUT=20000
HIKARI_IDLE_TIMEOUT=300000
HIKARI_MAX_LIFETIME=1200000

# ==========================================
# SECURITY CONFIGURATION
# ==========================================
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-free-tier-production
JWT_EXPIRATION=86400000

# ==========================================
# LOGGING CONFIGURATION (Optimized)
# ==========================================
LOG_LEVEL=INFO
APP_LOG_LEVEL=INFO
SECURITY_LOG_LEVEL=INFO

# Show SQL queries in logs (false for production)
SHOW_SQL=false
FORMAT_SQL=false

# Log files (rotated to save space)
LOG_FILE_NAME=/opt/booky-app/logs/application.log
LOG_FILE_MAX_SIZE=10MB
LOG_FILE_MAX_HISTORY=5

# ==========================================
# CORS CONFIGURATION
# ==========================================
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true

# ==========================================
# ACTUATOR CONFIGURATION
# ==========================================
# Health check and monitoring
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when-authorized

# ==========================================
# CLOUDINARY CONFIGURATION (Optional)
# ==========================================
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# ==========================================
# OPENAPI CONFIGURATION
# ==========================================
OPENAPI_DEV_URL=http://localhost:8080
OPENAPI_PROD_URL=http://your-ec2-public-ip

# ==========================================
# FREE TIER SPECIFIC SETTINGS
# ==========================================
# Optimization flags for Free Tier
FREE_TIER_MODE=true
OPTIMIZE_FOR_LOW_MEMORY=true
ENABLE_SWAP=true

# Cache settings (reduced for Free Tier)
CACHE_SIZE=100
CACHE_TTL=300

# Batch processing (reduced for Free Tier)
BATCH_SIZE=20
BATCH_PROCESSING_ENABLED=true

# ==========================================
# MONITORING CONFIGURATION
# ==========================================
# Cost monitoring
COST_MONITORING_ENABLED=true
ALERT_ON_COST_THRESHOLD=true
COST_THRESHOLD_USD=5.00

# Resource monitoring
RESOURCE_MONITORING_ENABLED=true
MEMORY_ALERT_THRESHOLD=80
CPU_ALERT_THRESHOLD=80
DISK_ALERT_THRESHOLD=85

# ==========================================
# DEPLOYMENT CONFIGURATION
# ==========================================
# EC2 Instance settings
EC2_INSTANCE_TYPE=t2.micro
EC2_KEY_NAME=booky-freetier-key
EC2_SECURITY_GROUP=booky-freetier-sg
EC2_INSTANCE_NAME=booky-freetier-server

# RDS settings
RDS_INSTANCE_CLASS=db.t3.micro
RDS_STORAGE_SIZE=20
RDS_INSTANCE_ID=booky-freetier-db
RDS_SECURITY_GROUP=booky-rds-freetier-sg

# ==========================================
# DEVELOPMENT NOTES
# ==========================================
# - This configuration is optimized for AWS Free Tier
# - Monitor your usage regularly to avoid unexpected costs
# - After 12 months, costs will apply (~$25-30/month)
# - Use the manage-free-tier.sh script to monitor costs
# - Stop instances when not in use to save Free Tier hours
# - Never commit this file with real values to git
# - Rotate passwords and secrets regularly

# ==========================================
# COST OPTIMIZATION TIPS
# ==========================================
# 1. Stop EC2 instances when not in use
# 2. Use RDS with minimal storage (20GB)
# 3. Monitor data transfer usage
# 4. Use CloudWatch alarms for cost alerts
# 5. Review AWS Free Tier usage monthly
# 6. Consider stopping services during development phases

# ==========================================
# SECURITY BEST PRACTICES
# ==========================================
# 1. Use strong, unique passwords
# 2. Enable MFA on AWS account
# 3. Regularly rotate JWT secrets
# 4. Use HTTPS in production
# 5. Monitor access logs
# 6. Keep dependencies updated
# 7. Use IAM roles with minimal permissions 