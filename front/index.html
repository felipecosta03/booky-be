<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Booky - Frontend Completo</title>
        <link rel="stylesheet" href="styles.css">
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet">
    </head>
    <body>
        <div id="app">
            <!-- Header -->
            <header class="header">
                <div class="container">
                    <div class="logo">
                        <i class="fas fa-book"></i>
                        <h1>Booky Complete</h1>
                    </div>
                    <div class="user-info" id="userInfo" style="display: none;">
                        <div class="user-stats">
                            <span id="followersCount">0 seguidores</span>
                            <span id="followingCount">0 siguiendo</span>
                        </div>
                        <div class="gamification-badge" id="gamificationBadge">
                            <span class="level-badge">Nivel 1</span>
                            <span class="points">0 pts</span>
                        </div>
                        <button id="logoutBtn" class="btn btn-secondary">Cerrar
                            Sesi√≥n</button>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="container">
                <!-- Login Section -->
                <section id="loginSection" class="section">
                    <div class="card">
                        <h2><i class="fas fa-sign-in-alt"></i> Iniciar
                            Sesi√≥n</h2>
                        <form id="loginForm">
                            <div class="form-group">
                                <label for="email">Email:</label>
                                <input type="email" id="email" required
                                    value="juan.perez@gmail.com">
                                <small>Usuarios de prueba:
                                    juan.perez@example.com,
                                    maria.garcia@example.com</small>
                            </div>
                            <div class="form-group">
                                <label for="password">Contrase√±a:</label>
                                <input type="password" id="password" required
                                    value="password123">
                                <small>Contrase√±a por defecto:
                                    password123</small>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-sign-in-alt"></i> Iniciar
                                Sesi√≥n
                            </button>
                        </form>
                    </div>
                </section>

                <!-- Dashboard -->
                <section id="dashboard" class="section" style="display: none;">

                    <!-- Gamification Panel -->
                    <div class="card gamification-panel">
                        <h2><i class="fas fa-trophy"></i> Mi Progreso</h2>
                        <div class="gamification-info" id="gamificationInfo">
                            <div class="level-info">
                                <div class="level-circle">
                                    <span id="currentLevel">1</span>
                                </div>
                                <div class="level-details">
                                    <h3 id="levelName">Novato</h3>
                                    <p id="levelDescription">Reci√©n comenzando
                                        tu aventura literaria</p>
                                    <div class="progress-bar">
                                        <div class="progress-fill"
                                            id="progressFill"></div>
                                    </div>
                                    <span id="pointsInfo">0 / 99 puntos</span>
                                </div>
                            </div>

                            <div class="achievements-section">
                                <h4><i class="fas fa-medal"></i> Logros
                                    Recientes</h4>
                                <div class="achievements-grid"
                                    id="achievementsList">
                                    <!-- Achievements will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Tabs -->
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="books">üìö
                            Libros</button>
                        <button class="tab-btn" data-tab="communities">üèòÔ∏è
                            Comunidades</button>
                        <button class="tab-btn" data-tab="readingClubs">üìñ
                            Clubes</button>
                        <button class="tab-btn" data-tab="posts">üí¨
                            Posts</button>
                        <button class="tab-btn" data-tab="exchanges">ü§ù
                            Intercambios</button>
                        <button class="tab-btn" data-tab="users">üë•
                            Usuarios</button>
                        <button class="tab-btn" data-tab="profile">üë§ Mi
                            Perfil</button>
                    </div>

                    <!-- Books Tab -->
                    <div id="booksTab" class="tab-content active">
                        <div class="card">
                            <h3><i class="fas fa-book"></i> Mi Biblioteca</h3>
                            <div class="actions">
                                <button id="addBookBtn" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Agregar Libro
                                </button>
                                <button id="searchBooksBtn"
                                    class="btn btn-secondary">
                                    <i class="fas fa-search"></i> Buscar Libros
                                </button>
                            </div>
                            <div class="book-filters">
                                <select id="statusFilter">
                                    <option value>Todos los estados</option>
                                    <option value="TO_READ">Por Leer</option>
                                    <option value="READING">Leyendo</option>
                                    <option value="READ">Le√≠do</option>
                                </select>
                                <label>
                                    <input type="checkbox" id="exchangeFilter">
                                    Solo intercambiables
                                </label>
                            </div>
                            <div id="booksList" class="items-grid">
                                <!-- Books will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Communities Tab -->
                    <div id="communitiesTab" class="tab-content">
                        <div class="card">
                            <h3><i class="fas fa-users"></i> Comunidades</h3>
                            <div class="actions">
                                <button id="createCommunityBtn"
                                    class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Crear Comunidad
                                </button>
                                <button id="myCommunitiesBtn"
                                    class="btn btn-secondary">
                                    <i class="fas fa-home"></i> Mis Comunidades
                                </button>
                            </div>
                            <div id="communitiesList" class="items-grid">
                                <!-- Communities will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Reading Clubs Tab -->
                    <div id="readingClubsTab" class="tab-content">
                        <div class="card">
                            <h3><i class="fas fa-book-reader"></i> Clubes de
                                Lectura</h3>
                            <div class="actions">
                                <button id="createReadingClubBtn"
                                    class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Crear Club
                                </button>
                                <button id="myClubsBtn"
                                    class="btn btn-secondary">
                                    <i class="fas fa-bookmark"></i> Mis Clubes
                                </button>
                            </div>
                            <div id="readingClubsList" class="items-grid">
                                <!-- Reading clubs will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Posts Tab -->
                    <div id="postsTab" class="tab-content">
                        <div class="card">
                            <h3><i class="fas fa-comment"></i> Posts &
                                Discusiones</h3>
                            <div class="actions">
                                <button id="createPostBtn"
                                    class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Crear Post
                                </button>
                                <select id="communityPostFilter">
                                    <option value>Todas las comunidades</option>
                                    <!-- Communities will be loaded here -->
                                </select>
                            </div>
                            <div id="postsList" class="items-list">
                                <!-- Posts will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Exchanges Tab -->
                    <div id="exchangesTab" class="tab-content">
                        <div class="card">
                            <h3><i class="fas fa-handshake"></i> Intercambios de
                                Libros</h3>
                            <div class="actions">
                                <button id="createExchangeBtn"
                                    class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Proponer
                                    Intercambio
                                </button>
                                <button id="createTestExchangeBtn"
                                    class="btn btn-success"
                                    onclick="ExchangesUI.createTestCompletedExchange()"
                                    style="background-color: #28a745; border-color: #28a745;">
                                    üß™ Crear Exchange de Prueba
                                </button>
                                <button id="testRatingModalBtn"
                                    class="btn btn-info"
                                    onclick="ExchangesUI.testRatingModal()"
                                    style="background-color: #17a2b8; border-color: #17a2b8;">
                                    üåü Probar Modal Rating
                                </button>
                                <select id="exchangeStatusFilter">
                                    <option value>Todos los estados</option>
                                    <option value="PENDING">Pendientes</option>
                                    <option value="ACCEPTED">Aceptados</option>
                                    <option value="REJECTED">Rechazados</option>
                                    <option
                                        value="CANCELLED">Cancelados</option>
                                    <option
                                        value="COMPLETED">Completados</option>
                                </select>
                            </div>
                            <div id="exchangesList" class="items-list">
                                <!-- Exchanges will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Users Tab -->
                    <div id="usersTab" class="tab-content">
                        <div class="card">
                            <h3><i class="fas fa-users"></i> Descubrir
                                Usuarios</h3>
                            <div class="actions">
                                <input type="text" id="userSearchInput"
                                    placeholder="Buscar usuarios por nombre o username..."
                                    class="search-input">
                                <button id="searchUsersBtn"
                                    class="btn btn-secondary">
                                    <i class="fas fa-search"></i> Buscar
                                </button>
                                <button id="clearSearchBtn"
                                    class="btn btn-sm btn-outline-secondary"
                                    style="display: none;">
                                    <i class="fas fa-times"></i> Limpiar
                                </button>
                            </div>

                            <!-- Search Results Section -->
                            <div id="searchResultsSection" class="user-section"
                                style="display: none;">
                                <h4><i class="fas fa-search"></i> Resultados de
                                    B√∫squeda</h4>
                                <div id="searchResultsList" class="items-grid">
                                    <!-- Search results will be loaded here -->
                                </div>
                            </div>

                            <div class="user-sections">
                                <div class="user-section">
                                    <h4><i class="fas fa-star"></i> Usuarios
                                        Sugeridos</h4>
                                    <div id="suggestedUsersList"
                                        class="items-grid">
                                        <!-- Suggested users will be loaded here -->
                                    </div>
                                </div>

                                <div class="user-section">
                                    <h4><i class="fas fa-heart"></i>
                                        Siguiendo</h4>
                                    <div id="followingList" class="items-grid">
                                        <!-- Following users will be loaded here -->
                                    </div>
                                </div>

                                <div class="user-section">
                                    <h4><i class="fas fa-users"></i>
                                        Seguidores</h4>
                                    <div id="followersList" class="items-grid">
                                        <!-- Followers will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Tab -->
                    <div id="profileTab" class="tab-content">
                        <div class="card">
                            <h3><i class="fas fa-user"></i> Mi Perfil</h3>
                            <div class="profile-info">
                                <div class="profile-header">
                                    <div class="profile-avatar">
                                        <i class="fas fa-user-circle"></i>
                                    </div>
                                    <div class="profile-details"
                                        id="profileDetails">
                                        <!-- Profile details will be loaded here -->
                                    </div>
                                </div>

                                <div class="profile-stats">
                                    <div class="stat-card">
                                        <h4 id="totalBooksCount">0</h4>
                                        <p>Libros en Biblioteca</p>
                                    </div>
                                    <div class="stat-card">
                                        <h4 id="booksReadCount">0</h4>
                                        <p>Libros Le√≠dos</p>
                                    </div>
                                    <div class="stat-card">
                                        <h4 id="communitiesJoinedCount">0</h4>
                                        <p>Comunidades</p>
                                    </div>
                                    <div class="stat-card">
                                        <h4 id="exchangesCount">0</h4>
                                        <p>Intercambios</p>
                                    </div>
                                </div>

                                <div class="profile-actions">
                                    <button id="editProfileBtn"
                                        class="btn btn-primary">
                                        <i class="fas fa-edit"></i> Editar
                                        Perfil
                                    </button>
                                    <button id="changePasswordBtn"
                                        class="btn btn-secondary">
                                        <i class="fas fa-lock"></i> Cambiar
                                        Contrase√±a
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                </section>
            </main>

            <!-- MODALS -->

            <!-- Add Book Modal -->
            <div id="addBookModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h3>Agregar Libro por ISBN</h3>
                    <p class="subtitle">Busca libros por su c√≥digo ISBN y
                        agr√©galos a tu biblioteca</p>
                    <form id="addBookByIsbnForm">
                        <div class="form-group">
                            <label for="bookISBNSearch">ISBN:</label>
                            <div class="search-group">
                                <input type="text" id="bookISBNSearch"
                                    required
                                    placeholder="Ej: 9780134685991">
                                <button type="button" id="searchByIsbnBtn"
                                    class="btn btn-secondary">
                                    üîç Buscar
                                </button>
                            </div>
                        </div>

                        <div id="bookPreview" class="book-preview"
                            style="display: none;">
                            <h4>Libro encontrado:</h4>
                            <div id="bookPreviewContent"></div>
                        </div>

                        <div class="form-group">
                            <label for="bookStatusIsbn">Estado:</label>
                            <select id="bookStatusIsbn" required>
                                <option value="TO_READ">Por Leer</option>
                                <option value="READING">Leyendo</option>
                                <option value="READ">Le√≠do</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary"
                            id="addByIsbnBtn" disabled>
                            Agregar a mi Biblioteca
                        </button>
                    </form>
                </div>
            </div>

            <!-- Create Community Modal -->
            <div id="createCommunityModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h3>Crear Nueva Comunidad</h3>
                    <form id="createCommunityForm">
                        <div class="form-group">
                            <label for="communityName">Nombre:</label>
                            <input type="text" id="communityName" required>
                        </div>
                        <div class="form-group">
                            <label
                                for="communityDescription">Descripci√≥n:</label>
                            <textarea id="communityDescription" required
                                placeholder="Describe tu comunidad..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Crear
                            Comunidad</button>
                    </form>
                </div>
            </div>

            <!-- Create Reading Club Modal -->
            <div id="createReadingClubModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h3>Crear Club de Lectura</h3>
                    <form id="createReadingClubForm">
                        <div class="form-group">
                            <label for="clubName">Nombre del Club:</label>
                            <input type="text" id="clubName" required>
                        </div>
                        <div class="form-group">
                            <label for="clubDescription">Descripci√≥n:</label>
                            <textarea id="clubDescription" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="clubCommunity">Comunidad:</label>
                            <select id="clubCommunity" required>
                                <option value>Selecciona una comunidad</option>
                                <!-- Communities will be loaded here -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="clubBook">Libro a leer:</label>
                            <select id="clubBook" required>
                                <option value>Selecciona un libro</option>
                                <!-- Books will be loaded here -->
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">Crear
                            Club</button>
                    </form>
                </div>
            </div>

            <!-- Create Post Modal -->
            <div id="createPostModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h3>Crear Nuevo Post</h3>
                    <form id="createPostForm">
                        <div class="form-group">
                            <label for="postCommunity">Comunidad
                                (opcional):</label>
                            <select id="postCommunity" name="communityId">
                                <option value>Post general</option>
                                <!-- Communities will be loaded here -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="postContent">Contenido:</label>
                            <textarea id="postContent" name="content" required
                                rows="6"
                                placeholder="Escribe el contenido de tu post..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="postImage">Imagen (opcional):</label>
                            <input type="file" id="postImage" name="image"
                                accept="image/*">
                        </div>
                        <button type="submit" class="btn btn-primary">Publicar
                            Post</button>
                    </form>
                </div>
            </div>

            <!-- Exchange Details Modal -->
            <div id="exchangeDetailsModal" class="modal">
                <div class="modal-content large">
                    <span class="close">&times;</span>
                    <h3>Detalles del Intercambio</h3>
                    <div id="exchangeDetailsContent">
                        <!-- Exchange details will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- User Profile Modal -->
            <div id="userProfileModal" class="modal">
                <div class="modal-content large">
                    <span class="close">&times;</span>
                    <div id="userProfileContent">
                        <!-- User profile details will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Post Details Modal -->
            <div id="postDetailsModal" class="modal">
                <div class="modal-content large">
                    <span class="close">&times;</span>
                    <div id="postDetailsContent">
                        <!-- Post details and comments will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Toast Messages -->
            <div id="toast" class="toast"></div>

            <!-- Loading Overlay -->
            <div id="loadingOverlay" class="loading-overlay"
                style="display: none;">
                <div class="spinner"></div>
                <p>Cargando...</p>
            </div>
        </div>

        <script src="app.js"></script>
    </body>
</html>